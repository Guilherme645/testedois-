<div class="container">
  <p-menubar [model]="items"></p-menubar>

  <input type="file" id="fileInput" (change)="uploadFile($event)" style="display: none;" accept=".zip" />

  <div *ngIf="uploadError" class="error-message">
    <p>{{ uploadError }}</p>
  </div>

  <div class="row">
    <!-- Componente de árvore para diretórios -->
    <div class="col-md-4">
      <h1><strong>Relatório</strong></h1>
      <p>Página para criação e atualização de relatórios</p>
      <hr />

      <h3>Diretórios</h3>
      <p-tree 
        [value]="files" 
        selectionMode="single" 
        [(selection)]="selectedFile" 
        (onNodeSelect)="onNodeSelect($event)"
        class="w-full">
      </p-tree>
    </div>

    <!-- Tabela de arquivos -->
    <div class="col-md-8">
      <table class="table" *ngIf="filesInDirectory.length > 0">
        <thead>
          <tr>
            <th>Nome do Arquivo</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let file of filesInDirectory" (click)="openReportDialog(file)">
            <td style="cursor: pointer; color: rgb(255, 0, 0); text-decoration: underline;">{{ file.name }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Diálogo para gerar relatório -->
  <p-dialog header="Gerar Relatório" [(visible)]="displayModal" [modal]="true">
    <app-GerarRelatorio [jsonData]="selectedJsonData"></app-GerarRelatorio>
  </p-dialog>
  
</div>


